(function(t){function e(e){for(var a,r,l=e[0],n=e[1],c=e[2],u=0,m=[];u<l.length;u++)r=l[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var t,e=0;e<s.length;e++){for(var o=s[e],a=!0,l=1;l<o.length;l++){var n=o[l];0!==i[n]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=o[0]))}return t}var a={},i={index:0},s=[];function r(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=a,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(o,a,function(e){return t[e]}.bind(null,a));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=n;s.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"24ee":function(t,e,o){},"3aae":function(t,e,o){"use strict";o("24ee")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app"},[o("router-view")],1)},s=[],r={name:"App"},l=r,n=(o("034f"),o("2877")),c=Object(n["a"])(l,i,s,!1,null,null,null),d=c.exports,u=o("951b"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增项目")]),o("el-table",{staticStyle:{width:"80%"},attrs:{data:t.projects,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"id"}}),o("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"180"}}),o("el-table-column",{attrs:{prop:"author_name",label:"负责人"}}),o("el-table-column",{attrs:{prop:"host",label:"项目地址"}}),o("el-table-column",{attrs:{prop:"max_threads",label:"最大并发",width:"150px"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.intoEditProject(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.intoSetTeamMember(e.row)}}},[t._v("添加协作人员")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleteProject(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"项目信息","modal-append-to-body":!1,visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"项目路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),o("el-form-item",{attrs:{label:"最大并发数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.max_threads,callback:function(e){t.$set(t.form,"max_threads",e)},expression:"form.max_threads"}})],1),o("el-form-item",{attrs:{label:"自动化任务路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.auto_host,callback:function(e){t.$set(t.form,"auto_host",e)},expression:"form.auto_host"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleAdd}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"项目信息",visible:t.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.isEdit=e}}},[o("el-form",{attrs:{model:t.edit_form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"项目id"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.id,callback:function(e){t.$set(t.edit_form,"id",e)},expression:"edit_form.id"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.name,callback:function(e){t.$set(t.edit_form,"name",e)},expression:"edit_form.name"}})],1),o("el-form-item",{attrs:{label:"项目路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.host,callback:function(e){t.$set(t.edit_form,"host",e)},expression:"edit_form.host"}})],1),o("el-form-item",{attrs:{label:"最大并发数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.max_threads,callback:function(e){t.$set(t.edit_form,"max_threads",e)},expression:"edit_form.max_threads"}})],1),o("el-form-item",{attrs:{label:"自动化任务路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.auto_host,callback:function(e){t.$set(t.edit_form,"auto_host",e)},expression:"edit_form.auto_host"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.editProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.isEdit=!1}}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"配置协作组员","modal-append-to-body":!1,visible:t.setMember,width:"30%"},on:{"update:visible":function(e){t.setMember=e}}},[t._v(" 选择协作人员 "),o("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:t.teamMembers,callback:function(e){t.teamMembers=e},expression:"teamMembers"}},t._l(t.users,(function(t){return o("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})),1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.setTeamMember}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.setMember=!1}}},[t._v("取 消")])],1)],1)],1)},p=[],f=o("5530"),h=(o("b0c0"),o("bc3a")),b=o.n(h),_=o("ca2f");b.a.defaults.withCredentials=!0;var v={name:"Project",data:function(){return{projects:[],isEdit:!1,dialogFormVisible:!1,form:{name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},edit_form:{id:"",name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},token:localStorage.Authorization,setMember:!1,teamMembers:[],setTeamProjectId:0}},computed:Object(f["a"])({},Object(_["c"])(["users"])),methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])(["getUserList"])),{},{addProject:function(){var t=this,e=this.form;b.a.post("http://127.0.0.1:8001/api/project/",e,{headers:{Authorization:this.token}}).then((function(e){1===e.data.code?(t.dialogFormVisible=!1,t.getProjectList()):t.$message(e.data.msg),t.resetForm()})).catch((function(e){t.$message("项目信息输入有误")}))},getProjectList:function(){var t=this;b.a.get("http://127.0.0.1:8001/api/project/",{headers:{Authorization:this.token},responseType:"json",params:{user_id:localStorage.getItem("UserId")}}).then((function(e){t.projects=e.data.data.res_pro_list}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditProject:function(t){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),t),this.isEdit=!0},editProject:function(){var t=this;b.a.put("http://127.0.0.1:8001/api/project/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1==e.data.code?(t.isEdit=!1,t.getProjectList()):t.$message(e.data.msg)})).catch((function(e){t.$message("项目信息输入有误")}))},deleteProject:function(t){var e=this,o=confirm("确定要删除该项目吗");o&&b.a.delete("http://127.0.0.1:8001/api/project/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(t){e.$message(t.data.msg),1==t.data.code&&e.getProjectList()}))},getTeamMembersList:function(t){var e=this;b.a.get("http://127.0.0.1:8001/api/teamMember/",{headers:{Authorization:this.token},responseType:"json",params:{project_id:t}}).then((function(t){e.teamMembers=t.data.data}))},intoSetTeamMember:function(t){this.getTeamMembersList(t.id),this.setTeamProjectId=t.id,this.getUserList("except_current"),console.log(this.users),this.setMember=!0},setTeamMember:function(){var t=this,e={users:this.teamMembers,project_id:this.setTeamProjectId};b.a.post("http://127.0.0.1:8001/api/teamMember/",e,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){t.setMember=!1}))},resetForm:function(){this.form.name="",this.form.host="",this.form.max_threads="",this.form.auto_host=""}}),mounted:function(){this.getProjectList()}},g=v,x=Object(n["a"])(g,m,p,!1,null,null,null),y=x.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[t._v(" 当前项目： "),o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.pro_id,callback:function(e){t.pro_id=e},expression:"pro_id"}},t._l(t.authorProjectList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id,project_index:t.index}})})),1),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:t.concurrentExcution}},[t._v("并发执行")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:t.lookReportSummary}},[t._v("查看报告总结")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增用例")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:t.uploadUtils}},[t._v(" 更新调试包 ")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:t.intoSetAutoTask}},[t._v(" 自动化任务设置 ")]),o("div",{staticStyle:{float:"right"}},[t._v(" 执行路径： "),o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.excuseHost,callback:function(e){t.excuseHost=e},expression:"excuseHost"}},t._l(t.currentHostList,(function(t){return o("el-option",{key:t.index,attrs:{label:t,value:t}})})),1)],1)],1),o("el-table",{attrs:{data:t.cases,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"id"}}),o("el-table-column",{attrs:{prop:"name",label:"用例名称"}}),o("el-table-column",{attrs:{prop:"script_name",label:"脚本名称"}}),o("el-table-column",{attrs:{prop:"is_threads",label:"是否并发"}}),o("el-table-column",{attrs:{prop:"is_auto_excuse",label:"是否自动执行"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{ref:"excuseBtn",attrs:{type:"primary",size:"small"},on:{click:function(o){return t.excuseCase(e.row)}}},[t._v("执行")]),o("el-button",{ref:"excuseBtn",attrs:{type:"danger",size:"small"},on:{click:function(o){return t.intoEditCase(e.row)}}},[t._v("编辑")]),o("el-button",{ref:"excuseBtn",attrs:{type:"danger",size:"small"},on:{click:function(o){return t.lookReport(e.row)}}},[t._v("报告")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleteCase(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"用例信息","modal-append-to-body":!1,visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用例名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"重试次数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.retry_count,callback:function(e){t.$set(t.form,"retry_count",e)},expression:"form.retry_count"}})],1),o("el-form-item",{attrs:{label:"是否并发"}},[o("el-radio",{attrs:{label:"1"},model:{value:t.form.is_thread,callback:function(e){t.$set(t.form,"is_thread",e)},expression:"form.is_thread"}},[t._v("是")]),o("el-radio",{attrs:{label:"2"},model:{value:t.form.is_thread,callback:function(e){t.$set(t.form,"is_thread",e)},expression:"form.is_thread"}},[t._v("否")])],1),o("el-form-item",{attrs:{label:"是否自动执行"}},[o("el-radio",{attrs:{label:"1"},model:{value:t.form.is_auto_excuse,callback:function(e){t.$set(t.form,"is_auto_excuse",e)},expression:"form.is_auto_excuse"}},[t._v("是")]),o("el-radio",{attrs:{label:"0"},model:{value:t.form.is_auto_excuse,callback:function(e){t.$set(t.form,"is_auto_excuse",e)},expression:"form.is_auto_excuse"}},[t._v("否")])],1),o("el-form-item",{attrs:{label:"用例脚本"}},[o("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{action:t.upLoadUrl,"on-success":t.handleSuccess,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload,multiple:"","auto-upload":!1,limit:1,"on-exceed":t.handleExceed,"file-list":t.fileList,headers:t.myHeader}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"success"},on:{click:t.submitUpload},slot:"trigger"},[t._v("选择脚本文件")])],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addCase}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleAddCase}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"用例信息",visible:t.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.isEdit=e}}},[o("el-form",{attrs:{model:t.edit_form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用例名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.name,callback:function(e){t.$set(t.edit_form,"name",e)},expression:"edit_form.name"}})],1),o("el-form-item",{attrs:{label:"重试次数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.retry_count,callback:function(e){t.$set(t.edit_form,"retry_count",e)},expression:"edit_form.retry_count"}})],1),o("el-form-item",{attrs:{label:"是否并发"}},[o("el-radio",{attrs:{label:"1"},model:{value:t.edit_form.is_thread,callback:function(e){t.$set(t.edit_form,"is_thread",e)},expression:"edit_form.is_thread"}},[t._v("是")]),o("el-radio",{attrs:{label:"2"},model:{value:t.edit_form.is_thread,callback:function(e){t.$set(t.edit_form,"is_thread",e)},expression:"edit_form.is_thread"}},[t._v("否")])],1),o("el-form-item",{attrs:{label:"是否自动执行"}},[o("el-radio",{attrs:{label:"1"},model:{value:t.edit_form.is_auto_excuse,callback:function(e){t.$set(t.edit_form,"is_auto_excuse",e)},expression:"edit_form.is_auto_excuse"}},[t._v("是")]),o("el-radio",{attrs:{label:"0"},model:{value:t.edit_form.is_auto_excuse,callback:function(e){t.$set(t.edit_form,"is_auto_excuse",e)},expression:"edit_form.is_auto_excuse"}},[t._v("否")])],1),o("el-form-item",{attrs:{label:"用例脚本"}},[o("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{action:t.upLoadUrl,"on-success":t.handleSuccess,"before-remove":t.beforeRemove,"before-upload":t.beforeUploadEdit,multiple:"","auto-upload":!1,limit:1,"on-exceed":t.handleExceed,"file-list":t.utilsFileList,headers:t.myHeader}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[t._v("选择脚本文件")])],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.editCase}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.isEdit=!1}}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"测试报告","modal-append-to-body":!1,visible:t.isLookReport,width:"80%"},on:{"update:visible":function(e){t.isLookReport=e}}},[o("div",[o("div",{ref:"reportHTML",staticClass:"web-con",domProps:{innerHTML:t._s(t.htmlText)}})])]),o("el-dialog",{attrs:{title:"测试报告总结","modal-append-to-body":!1,visible:t.isLookReportSummary,width:"30%"},on:{"update:visible":function(e){t.isLookReportSummary=e}}},[o("div",{ref:"reportSummary",staticStyle:{"text-align":"center","font-size":"16px"}})]),o("el-dialog",{attrs:{title:"调试包更新","modal-append-to-body":!1,visible:t.clientUpdate,width:"60%"},on:{"update:visible":function(e){t.clientUpdate=e}}},[o("div",[o("div",[o("h4",[t._v("下载调试包:调试包中有对应的用例脚本模板,以及公用的工具包;工具包可进行更新")]),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"}},[o("span",{staticClass:"link-url",on:{click:t.downloadClient}},[t._v("点击下载调试包")])])],1),o("div",[o("h4",[t._v("更新工具包:可对public中的公用包进行更新,上传的文件须为python文件")]),o("el-upload",{staticClass:"upload-demo",attrs:{action:t.uploadUtilsUrl,multiple:"","auto-upload":!0,limit:3,"before-upload":t.beforeUtilUpload,"file-list":t.utilsFileList,headers:t.myHeader}},[o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[t._v("点击更新工具包")])],1)],1)])]),o("el-dialog",{attrs:{title:"自动化任务设置","modal-append-to-body":!1,visible:t.isSetAuto,width:"50%"},on:{"update:visible":function(e){t.isSetAuto=e}}},[o("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"任务配置",name:"first"}},[o("el-form",{attrs:{model:t.autoTask,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"是否开启"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoTask.autoSwitch,callback:function(e){t.$set(t.autoTask,"autoSwitch",e)},expression:"autoTask.autoSwitch"}})],1),o("el-form-item",{attrs:{label:" 设置执行时间"}},[o("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"选择时间"},model:{value:t.autoTask.autoExcuseTime,callback:function(e){t.$set(t.autoTask,"autoExcuseTime",e)},expression:"autoTask.autoExcuseTime"}})],1)],1),o("div",{attrs:{align:"center"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.openOrCloseTask}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleSetAuto}},[t._v("取 消")])],1)],1),o("el-tab-pane",{attrs:{label:"通知配置",name:"second"}},[o("h4",[t._v("配置任务通知")]),o("div",[t._v(" 选择通知方式: "),o("el-select",{attrs:{size:"small",placeholder:"请选择通知方式"},model:{value:t.sendType,callback:function(e){t.sendType=e},expression:"sendType"}},t._l(t.typeList,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v("    "),o("span",{directives:[{name:"show",rawName:"v-show",value:1==t.sendType,expression:"sendType==1"}]},[t._v("选择通知人员: "),o("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:t.sendUserList,callback:function(e){t.sendUserList=e},expression:"sendUserList"}},t._l(t.users,(function(t){return o("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})),1)],1),o("span",{directives:[{name:"show",rawName:"v-show",value:2==t.sendType,expression:"sendType==2"}]},[t._v("请输入webhook地址: "),o("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:t.webhook,callback:function(e){t.webhook=e},expression:"webhook"}})],1),t._v("    "),o("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"small"},on:{click:t.addNotice}})],1)])],1)],1)],1)},w=[],j=(o("a434"),o("d3b7"),o("159b"),o("ac1f"),o("5319"),o("1276"),o("a9e3"),o("25f0"),{baseURL:"http://127.0.0.1:8001/api/"});b.a.defaults.withCredentials=!0;var S={name:"Project",data:function(){return{activeName:"first",sendType:"1",typeList:[{value:"1",label:"邮箱"},{value:"2",label:"企业微信"}],cases:[],sendUserList:[],webhook:"",isEdit:!1,dialogFormVisible:!1,isSetAuto:!1,autoTask:{autoSwitch:!1,autoExcuseTime:""},autoTaskStatus:{autoSwitch:!1,autoExcuseTime:""},pro_id:0,form:{name:"",is_thread:"1",retry_count:"",script_name:"",author:localStorage.getItem("UserId"),is_auto_excuse:"1"},edit_form:{name:"",is_thread:"",retry_count:"",script_name:"",author:localStorage.getItem("UserId"),is_auto_excuse:""},authorProjectList:[],fileList:[],utilsFileList:[],fileName:"",token:localStorage.Authorization,myHeader:{Authorization:localStorage.Authorization},hostList:{},currentHostList:[],excuseHost:"",htmlText:"",isLookReport:!1,isLookReportSummary:!1,reportSummaryContent:"",clientUpdate:!1}},methods:Object(f["a"])(Object(f["a"])({handleClick:function(t,e){},handleSuccess:function(t){this.fileList.splice(0,1)},beforeUtilUpload:function(t){var e="text/x-python"===t.type,o=t.size/1024/1024<.2;return e||this.$message.error("上传工具类只能是python文件!"),o||this.$message.error("上传工具类大小不能超过 200KB!"),e&&o},beforeUpload:function(t){this.form.script_name=t.name},beforeUploadEdit:function(t){this.edit_form.script_name=t.name},handleExceed:function(){this.$message.warning("一次只能上传一个脚本文件")},beforeRemove:function(t,e){var o=this.$confirm("确定移除 ".concat(t.name,"？"));return o&&(this.form.script_name=""),o},submitUpload:function(){this.$refs.uploadFile.submit()},addCase:function(){var t=this,e=this.form;e["project_id"]=this.pro_id,this.submitUpload(),b.a.post(j.baseURL+"case/",e,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){t.dialogFormVisible=!1,t.getCaseList(t.pro_id),t.resetForm()}))},cancleAddCase:function(){this.dialogFormVisible=!1,this.resetForm()},getCaseList:function(t){var e=this;b.a.get(j.baseURL+"case/",{headers:{Authorization:this.token},responseType:"json",params:{pro_id:t}}).then((function(t){t.data.data.forEach((function(t){1===t["is_thread"]?t["is_threads"]="是":t["is_threads"]="否",1===t["is_auto_excuse"]?t["is_auto_excuse"]="是":t["is_auto_excuse"]="否"})),e.cases=t.data.data}))},intoEditCase:function(t){""!==t.script_name&&this.fileList.splice(0,1,{name:t.script_name}),"是"===t.is_threads?t["is_thread"]="1":t["is_thread"]="2","是"===t.is_auto_excuse?t["is_auto_excuse"]="1":t["is_auto_excuse"]="0",this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),t),delete this.edit_form.is_threads,this.isEdit=!0},editCase:function(){var t=this;this.submitUpload(),b.a.put(j.baseURL+"case/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1==e.data.code?(t.isEdit=!1,t.getCaseList(t.pro_id)):alert(e.data.msg)}))},excuseCase:function(t){var e=this;b.a.get(j.baseURL+"case/excuse/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json",params:{host:this.excuseHost}}).then((function(t){e.$message(t.data.msg)}))},deleteCase:function(t){var e=this,o=confirm("确定要删除该项目吗");o&&b.a.delete(j.baseURL+"case/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(t){e.$message(t.data.msg),1==t.data.code&&e.getCaseList(e.pro_id)}))},lookReport:function(t){var e=this;b.a.get(j.baseURL+"case/report/"+t.id+"/",{headers:{Authorization:this.token}}).then((function(t){if(3==t.data.code)e.$message(t.data.msg);else{e.htmlText=t.data;var o="";t.data.replace(/<script.*?>([\s\S]+?)<\/script>/gim,(function(t,e){o=e})),e.$nextTick((function(){var t=document.createElement("script");t.innerHTML=o,e.$refs.reportHTML.append(t)})),e.isLookReport=!0}}))},uploadUtils:function(){this.utilsFileList.splice(0,3),this.clientUpdate=!0},resetForm:function(){this.form.name="",this.form.is_thread="1",this.form.is_auto_excuse="1",this.form.retry_count="",this.form.script_name=""},concurrentExcution:function(){b.a.get(j.baseURL+"case/concurrent/",{params:{project_id:this.pro_id,host:this.excuseHost},headers:{Authorization:this.token},responseType:"json"}).then((function(t){confirm(t.data.msg)}))},lookReportSummary:function(){var t=this;b.a.get(j.baseURL+"case/reportsummary/"+this.pro_id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1===e.data.code?(t.isLookReportSummary=!0,t.$nextTick((function(){t.$refs.reportSummary.innerHTML=e.data.data}))):t.$message(e.data.msg)}))},downloadClient:function(){window.open(j.baseURL+"case/downloadclient/45/")},intoSetAutoTask:function(){var t=this;b.a.get(j.baseURL+"project/"+this.pro_id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){var o=e.data.data;t.autoTask.autoSwitch=1==o["is_auto"],t.autoTask.autoExcuseTime=o["excuse_time"]})),b.a.get(j.baseURL+"notice/"+this.pro_id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){var o=e.data.data;t.sendType=o["notice_type"]+"",t.sendUserList.splice(0),"1"===t.sendType&&o["user_list"].split(",").forEach((function(e){t.sendUserList.push(Number(e))})),t.webhook=o["webhook"]})),this.getUserList("all"),this.autoTaskStatus=Object(f["a"])(Object(f["a"])({},this.autoTaskStatus),this.autoTask),this.isSetAuto=!0},cancleSetAuto:function(){this.autoTask=Object(f["a"])(Object(f["a"])({},this.autoTask),this.autoTaskStatus),this.isSetAuto=!1},openOrCloseTask:function(){var t=this;this.autoTask.autoSwitch?b.a.get(j.baseURL+"case/openMonitor/"+this.pro_id+"/",{headers:{Authorization:this.token},responseType:"json",params:{excuse_time:this.autoTask.autoExcuseTime}}).then((function(e){t.isSetAuto=!1,t.$message(e.data.msg)})):b.a.delete(j.baseURL+"case/openMonitor/"+this.pro_id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){t.isSetAuto=!1,t.$message(e.data.msg)}))}},Object(_["b"])(["getUserList"])),{},{addNotice:function(){var t=this,e={project_id:this.pro_id};if("1"==this.sendType){var o=this.sendUserList.length;if(0===o)return void this.$message.error("必须配置收件人");e["notice_type"]=1;for(var a=this.sendUserList[0],i=1;i<o;i++)a+=","+this.sendUserList[i];e["user_list"]=a}else e["notice_type"]=2,e["webhook"]=this.webhook;b.a.post(j.baseURL+"notice/",e,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){t.$message(e.data.msg),t.isSetAuto=!1}))}}),computed:Object(f["a"])({upLoadUrl:function(){return j.baseURL+"case/uploadScript/"+this.pro_id+"/"},uploadUtilsUrl:function(){return j.baseURL+"case/uploadUtils/"+this.pro_id+"/"}},Object(_["c"])(["users"])),watch:{pro_id:function(t,e){this.getCaseList(t),this.currentHostList=this.hostList[t.toString()],this.excuseHost=this.currentHostList[0]}},mounted:function(){var t=this;b.a.get(j.baseURL+"project/",{headers:{Authorization:this.token},responseType:"json",params:{user_id:localStorage.getItem("UserId")}}).then((function(e){e.data.data.res_pro_list.forEach((function(e){t.authorProjectList.push(e)})),t.hostList=e.data.data.res_host_list,e.data.data.res_pro_list.length>0?(t.pro_id=e.data.data.res_pro_list[0].id,t.getCaseList(t.pro_id)):t.pro_id=""}))}},L=S,$=Object(n["a"])(L,k,w,!1,null,null,null),T=$.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("创建任务")]),o("el-table",{attrs:{data:t.tasks,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),o("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"180"}}),o("el-table-column",{attrs:{prop:"author",label:"负责人"}}),o("el-table-column",{attrs:{prop:"project_id",label:"所属项目"}}),o("el-table-column",{attrs:{prop:"task_level",label:"任务等级",width:"100px"}}),o("el-table-column",{attrs:{prop:"case_count",label:"用例数",width:"100px"}}),o("el-table-column",{attrs:{prop:"excuse_result",label:"执行结果"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.intoEditProject(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleteProject(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"任务信息","modal-append-to-body":!1,visible:t.isAdd,width:"40%"},on:{"update:visible":function(e){t.isAdd=e}}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"任务名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"所属项目"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),o("el-form-item",{attrs:{label:"添加用例"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.max_threads,callback:function(e){t.$set(t.form,"max_threads",e)},expression:"form.max_threads"}})],1),o("el-form-item",{attrs:{label:"任务等级"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.auto_host,callback:function(e){t.$set(t.form,"auto_host",e)},expression:"form.auto_host"}})],1),o("el-form-item",{attrs:{label:"执行时间"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.auto_host,callback:function(e){t.$set(t.form,"auto_host",e)},expression:"form.auto_host"}})],1),o("el-form-item",{attrs:{label:"间隔时间"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择间隔时间"},model:{value:t.pro_id,callback:function(e){t.pro_id=e},expression:"pro_id"}},t._l(t.authorProjectList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id,project_index:t.index}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleAdd}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"项目信息",visible:t.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.isEdit=e}}},[o("el-form",{attrs:{model:t.edit_form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"项目id"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.id,callback:function(e){t.$set(t.edit_form,"id",e)},expression:"edit_form.id"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.name,callback:function(e){t.$set(t.edit_form,"name",e)},expression:"edit_form.name"}})],1),o("el-form-item",{attrs:{label:"项目路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.host,callback:function(e){t.$set(t.edit_form,"host",e)},expression:"edit_form.host"}})],1),o("el-form-item",{attrs:{label:"最大并发数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.max_threads,callback:function(e){t.$set(t.edit_form,"max_threads",e)},expression:"edit_form.max_threads"}})],1),o("el-form-item",{attrs:{label:"自动化任务路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.auto_host,callback:function(e){t.$set(t.edit_form,"auto_host",e)},expression:"edit_form.auto_host"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.editProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.isEdit=!1}}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"配置协作组员","modal-append-to-body":!1,visible:t.setMember,width:"30%"},on:{"update:visible":function(e){t.setMember=e}}},[t._v(" 选择协作人员 "),o("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:t.teamMembers,callback:function(e){t.teamMembers=e},expression:"teamMembers"}},t._l(t.users,(function(t){return o("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})),1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.setTeamMember}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.setMember=!1}}},[t._v("取 消")])],1)],1)],1)},z=[];b.a.defaults.withCredentials=!0;var A={name:"Task",data:function(){return{tasks:[],IntervalTimeList:[],isEdit:!1,isAdd:!1,form:{name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},edit_form:{id:"",name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},token:localStorage.Authorization}},methods:{addProject:function(){var t=this,e=this.form;b.a.post("http://127.0.0.1:8001/api/project/",e,{headers:{Authorization:this.token}}).then((function(e){1===e.data.code?(t.dialogFormVisible=!1,t.getProjectList()):t.$message(e.data.msg),t.resetForm()})).catch((function(e){t.$message("项目信息输入有误")}))},getProjectList:function(){var t=this;b.a.get("http://127.0.0.1:8001/api/project/",{headers:{Authorization:this.token},responseType:"json",params:{user_id:localStorage.getItem("UserId")}}).then((function(e){t.projects=e.data.data.res_pro_list}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditProject:function(t){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),t),this.isEdit=!0},editProject:function(){var t=this;b.a.put("http://127.0.0.1:8001/api/project/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1==e.data.code?(t.isEdit=!1,t.getProjectList()):t.$message(e.data.msg)})).catch((function(e){t.$message("项目信息输入有误")}))},deleteProject:function(t){var e=this,o=confirm("确定要删除该项目吗");o&&b.a.delete("http://127.0.0.1:8001/api/project/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(t){e.$message(t.data.msg),1==t.data.code&&e.getProjectList()}))},resetForm:function(){this.form.name="",this.form.host="",this.form.max_threads="",this.form.auto_host=""}},mounted:function(){this.getProjectList()}},C=A,E=Object(n["a"])(C,U,z,!1,null,null,null),P=E.exports,O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("div",{staticClass:"container",style:t.bgI},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-offset-3 col-md-6"},[o("form",{staticClass:"form-horizontal"},[o("span",{staticClass:"heading"},[t._v("用户登录")]),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),o("i",{staticClass:"fa fa-user"})]),o("div",{staticClass:"form-group help"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"密　码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),o("i",{staticClass:"fa fa-lock"}),o("a",{staticClass:"fa fa-question-circle",attrs:{href:"#"}})]),o("div",{staticClass:"form-group"},[t._m(0),o("span",{staticClass:"text"},[t._v("Remember me")]),o("button",{staticClass:"btn btn-default",on:{click:t.login}},[t._v("登录")])])])])])])])},F=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main-checkbox"},[o("input",{attrs:{type:"checkbox",value:"None",id:"checkbox1",name:"check"}}),o("label",{attrs:{for:"checkbox1"}})])}],I={name:"Login",data:function(){return{username:"",password:""}},methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])(["changeLogin"])),{},{login:function(){var t=this;if(""===this.username||""===this.password)this.$message("账号或密码不能为空");else{var e={username:this.username,password:this.password};b.a.post("http://127.0.0.1:8001/api/login/",e).then((function(e){t.changeLogin({Authorization:"JWT "+e.data.token,name:e.data.username,id:e.data.id}),t.$router.push("/")}))}}}),computed:{bgI:function(){return{backgroundImage:"url("+o("789c")+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",height:"70%",width:"80%",marginTop:"118px"}}}},M=I,R=(o("3aae"),Object(n["a"])(M,O,F,!1,null,"36ae18a9",null)),V=R.exports,H=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[o("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[[o("Navigation")]],2),o("el-main",{staticStyle:{width:"1800px","margin-left":"auto","margin-right":"auto"}},[o("router-view")],1)],1)},N=[],B=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",{attrs:{gutter:0}},[o("el-col",{attrs:{span:18}},[o("div",{staticClass:"grid-content bg-purple"},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#0074D9","text-color":"#fff","active-text-color":"#00A2E9",router:""}},[o("el-menu-item",{attrs:{disabled:""}},[t._v("WE-UI")]),o("el-menu-item",{attrs:{index:"case"}},[t._v("用例管理")]),o("el-menu-item",{attrs:{index:"user"}},[t._v("人员管理")]),o("el-submenu",{attrs:{index:"4"}},[o("template",{slot:"title"},[t._v("元素库管理")]),o("el-menu-item",{attrs:{index:"4-1"}},[t._v("元素库列表")]),o("el-menu-item",{attrs:{index:"4-2"}},[t._v("页面管理")])],2),o("el-menu-item",{attrs:{index:"project"}},[t._v("项目管理")])],1)],1)]),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"grid-content bg-purple",staticStyle:{"background-color":"#0074d9"}},[o("span",{staticStyle:{color:"#fbfdff"}},[t._v("当前用户：")]),t._v("  "),o("el-dropdown",{staticStyle:{"margin-top":"15px","margin-right":"20px"}},[o("span",{staticClass:"el-dropdown-link"},[o("i",{staticClass:"el-icon-user-solid"}),t._v(" "+t._s(t.username)),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",[t._v("修改密码")]),o("el-dropdown-item",[t._v("退出")])],1)],1)],1)])],1)],1)},J=[],D={name:"Navigation",data:function(){return{activeIndex:"1",activeIndex2:"1",circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},computed:{username:function(){return localStorage.getItem("User")}}},W=D,q=(o("a51f"),Object(n["a"])(W,B,J,!1,null,"2ecfc18c",null)),K=q.exports,G={name:"Index",components:{Navigation:K},methods:{}},Q=G,X=Object(n["a"])(Q,H,N,!1,null,null,null),Y=X.exports,Z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdmin,expression:"isAdmin"}],on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增用户")]),o("el-table",{attrs:{data:t.users,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"id"}}),o("el-table-column",{attrs:{prop:"username",label:"用户名称"}}),o("el-table-column",{attrs:{prop:"user_type",label:"角色"}}),o("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.intoEditProject(e.row)}}},[t._v("编辑")]),o("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdmin,expression:"isAdmin"}],attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleteUser(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"用户信息","modal-append-to-body":!1,visible:t.dialogFormVisible,width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用户名称"}},[o("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),o("el-form-item",{attrs:{label:"邮箱账号"}},[o("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),o("el-form-item",{attrs:{label:"用户角色"}},[o("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.form.is_superuser,callback:function(e){t.$set(t.form,"is_superuser",e)},expression:"form.is_superuser"}},t._l(t.userTypeList,(function(t){return o("el-option",{key:t.num,attrs:{label:t.type,value:t.num}})})),1)],1),o("el-form-item",{attrs:{label:"设置密码"}},[o("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleAdd}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"项目信息",visible:t.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.isEdit=e}}},[o("el-form",{attrs:{model:t.edit_form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"用户id"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.id,callback:function(e){t.$set(t.edit_form,"id",e)},expression:"edit_form.id"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用户名称"}},[o("el-input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:t.edit_form.username,callback:function(e){t.$set(t.edit_form,"username",e)},expression:"edit_form.username"}})],1),o("el-form-item",{attrs:{label:"邮箱账号"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.email,callback:function(e){t.$set(t.edit_form,"email",e)},expression:"edit_form.email"}})],1),o("el-form-item",{attrs:{label:"用户角色"}},[o("el-input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:t.edit_form.user_type,callback:function(e){t.$set(t.edit_form,"user_type",e)},expression:"edit_form.user_type"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.editUser}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.isEdit=!1}}},[t._v("取 消")])],1)],1)],1)},tt=[];b.a.defaults.withCredentials=!0;var et={name:"Project",data:function(){return{users:[],isEdit:!1,userTypeList:[{num:1,type:"普通用户"},{num:2,type:"管理员"}],dialogFormVisible:!1,token:localStorage.Authorization,currentUser:localStorage.UserId,form:{username:"",email:"",password:"",is_superuser:""},edit_form:{id:"",username:"",email:"",is_superuser:""}}},methods:{addUser:function(){var t=this,e=Object(f["a"])(Object(f["a"])({},this.addProjectData),this.form);e["is_superuser"]=0===this.form["is_superuser"],b.a.post("http://127.0.0.1:8001/api/user/",e,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1===e.data.code?(t.dialogFormVisible=!1,t.getUserList()):t.$message(e.data.msg),t.resetForm()})).catch((function(e){t.$message("项目信息输入有误")}))},getUserList:function(){var t=this;b.a.get("http://127.0.0.1:8001/api/user/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){e.data.data.forEach((function(t){t["is_superuser"]?t["user_type"]="超级管理员":t["user_type"]="普通用户"})),t.users=e.data.data}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditProject:function(t){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),t),this.edit_form["user_type"]=this.edit_form["is_superuser"]?"超级管理员":"普通用户",this.isEdit=!0},editUser:function(){var t=this;b.a.put("http://127.0.0.1:8001/api/user/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1==e.data.code?(t.isEdit=!1,t.getUserList()):t.$message(e.data.msg)})).catch((function(e){t.$message("项目信息输入有误")}))},deleteUser:function(t){var e=this,o=confirm("确定要删除该用户吗");o&&b.a.delete("http://127.0.0.1:8001/api/user/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(t){e.$message(t.data.msg),1==t.data.code&&e.getUserList()}))},resetForm:function(){this.form.username="",this.form.email="",this.form.password="",this.form.is_superuser=""}},computed:{isAdmin:function(){return 1==this.currentUser}},mounted:function(){this.getUserList()}},ot=et,at=Object(n["a"])(ot,Z,tt,!1,null,null,null),it=at.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("新增项目")]),o("el-table",{attrs:{data:t.projects,stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"id",width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"180"}}),o("el-table-column",{attrs:{prop:"author",label:"负责人"}}),o("el-table-column",{attrs:{prop:"host",label:"项目地址"}}),o("el-table-column",{attrs:{prop:"max_threads",label:"最大并发",width:"150px"}}),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return t.intoEditProject(e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return t.deleteProject(e.row)}}},[t._v("删除")])]}}])})],1),o("el-dialog",{attrs:{title:"项目信息","modal-append-to-body":!1,visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"项目路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}})],1),o("el-form-item",{attrs:{label:"最大并发数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.max_threads,callback:function(e){t.$set(t.form,"max_threads",e)},expression:"form.max_threads"}})],1),o("el-form-item",{attrs:{label:"自动化任务路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.form.auto_host,callback:function(e){t.$set(t.form,"auto_host",e)},expression:"form.auto_host"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.addProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:t.cancleAdd}},[t._v("取 消")])],1)],1),o("el-dialog",{attrs:{title:"项目信息",visible:t.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(e){t.isEdit=e}}},[o("el-form",{attrs:{model:t.edit_form,"label-position":"right","label-width":"120px"}},[o("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"项目id"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.id,callback:function(e){t.$set(t.edit_form,"id",e)},expression:"edit_form.id"}})],1),o("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.name,callback:function(e){t.$set(t.edit_form,"name",e)},expression:"edit_form.name"}})],1),o("el-form-item",{attrs:{label:"项目路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.host,callback:function(e){t.$set(t.edit_form,"host",e)},expression:"edit_form.host"}})],1),o("el-form-item",{attrs:{label:"最大并发数"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.max_threads,callback:function(e){t.$set(t.edit_form,"max_threads",e)},expression:"edit_form.max_threads"}})],1),o("el-form-item",{attrs:{label:"自动化任务路径"}},[o("el-input",{staticStyle:{width:"350px"},model:{value:t.edit_form.auto_host,callback:function(e){t.$set(t.edit_form,"auto_host",e)},expression:"edit_form.auto_host"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.editProject}},[t._v("确 定")]),o("el-button",{attrs:{type:"danger"},on:{click:function(e){t.isEdit=!1}}},[t._v("取 消")])],1)],1)],1)},rt=[];b.a.defaults.withCredentials=!0;var lt={name:"Project",data:function(){return{projects:[],isEdit:!1,dialogFormVisible:!1,form:{name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},edit_form:{id:"",name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},token:localStorage.Authorization}},methods:{addProject:function(){var t=this,e=this.form;b.a.post("http://127.0.0.1:8001/api/project/",e,{headers:{Authorization:this.token}}).then((function(e){1===e.data.code?(t.dialogFormVisible=!1,t.getProjectList()):t.$message(e.data.msg),t.resetForm()})).catch((function(e){t.$message("项目信息输入有误")}))},getProjectList:function(){var t=this;b.a.get("http://127.0.0.1:8001/api/project/",{headers:{Authorization:this.token},responseType:"json",params:{user_id:localStorage.getItem("UserId")}}).then((function(e){t.projects=e.data.data.res_pro_list}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditProject:function(t){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),t),this.isEdit=!0},editProject:function(){var t=this;b.a.put("http://127.0.0.1:8001/api/project/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(e){1==e.data.code?(t.isEdit=!1,t.getProjectList()):t.$message(e.data.msg)})).catch((function(e){t.$message("项目信息输入有误")}))},deleteProject:function(t){var e=this,o=confirm("确定要删除该项目吗");o&&b.a.delete("http://127.0.0.1:8001/api/project/"+t.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(t){e.$message(t.data.msg),1==t.data.code&&e.getProjectList()}))},resetForm:function(){this.form.name="",this.form.host="",this.form.max_threads="",this.form.auto_host=""}},mounted:function(){this.getProjectList()}},nt=lt,ct=Object(n["a"])(nt,st,rt,!1,null,null,null),dt=ct.exports;a["default"].use(u["a"]);var ut=u["a"].prototype.push;u["a"].prototype.push=function(t){return ut.call(this,t).catch((function(t){return t}))};var mt=new u["a"]({routes:[{name:"home",path:"/",component:Y,children:[{name:"project",path:"project",component:y},{name:"case",path:"case",component:T},{name:"user",path:"user",component:it},{name:"element",path:"element",component:dt},{name:"task",path:"task",component:P}]},{name:"login",path:"/login",component:V}]}),pt=mt,ft=o("5c96"),ht=o.n(ft);o("0fae"),o("4de4");a["default"].use(_["a"]);var bt={},_t={changeLogin:function(t,e){t.Authorization=e.Authorization,localStorage.setItem("Authorization",e.Authorization),localStorage.setItem("User",e.name),localStorage.setItem("UserId",e.id),t.isLogin=!0},getUserList:function(t,e){console.log(e),b.a.get("http://127.0.0.1:8001/api/user/",{headers:{Authorization:localStorage.getItem("Authorization")},responseType:"json"}).then((function(o){"except_current"===e?t.users=o.data.data.filter((function(t){return t.id!=localStorage.UserId})):"all"===e&&(t.users=o.data.data)}))}},vt={Authorization:localStorage.getItem("Authorization")?localStorage.getItem("Authorization"):"",isLogin:!1,users:[]},gt=new _["a"].Store({actions:bt,mutations:_t,state:vt});a["default"].config.productionTip=!1,a["default"].use(ht.a),a["default"].use(u["a"]),new a["default"]({render:function(t){return t(d)},router:pt,store:gt,beforeCreate:function(){a["default"].prototype.$bus=this}}).$mount("#app")},"789c":function(t,e,o){t.exports=o.p+"static/img/login.a9a78798.png"},"85ec":function(t,e,o){},a51f:function(t,e,o){"use strict";o("ddb1")},ddb1:function(t,e,o){}});
//# sourceMappingURL=index.33caebe7.js.map