(function(e){function t(t){for(var i,s,l=t[0],n=t[1],c=t[2],u=0,m=[];u<l.length;u++)s=l[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,l=1;l<a.length;l++){var n=a[l];0!==o[n]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},o={index:0},r=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=n;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0032":function(e,t,a){},"034f":function(e,t,a){"use strict";a("85ec")},4196:function(e,t,a){},"4dd9":function(e,t,a){e.exports=a.p+"static/img/we-ui图标.4255b8f9.jpg"},5421:function(e,t,a){"use strict";a("8f55")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("router-view")],1)},r=[],s={name:"App"},l=s,n=(a("034f"),a("2877")),c=Object(n["a"])(l,o,r,!1,null,null,null),d=c.exports,u=a("8c4f"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","border-radius":"20px",padding:"10px"}},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增项目")]),a("search",{attrs:{searchData:e.searchData},on:{search:e.search}}),a("el-table",{attrs:{data:e.projects,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"80px"}}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",width:"120px"}}),a("el-table-column",{attrs:{prop:"author_name",label:"负责人",width:"120px"}}),a("el-table-column",{attrs:{prop:"host",label:"项目地址"}}),a("el-table-column",{attrs:{prop:"max_threads",label:"最大并发",width:"120px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(a){return e.intoEditProject(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(a){return e.intoSetTeamMember(t.row)}}},[e._v("添加协作人员")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.deleteProject(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:"项目信息","modal-append-to-body":!1,visible:e.dialogFormVisible,width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addProForm",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"项目路径",required:!0,prop:"host"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目路径 多个路径使用逗号隔开"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),a("el-form-item",{attrs:{label:"最大并发数"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入最大并发数",oninput:"value=value.replace(/[^\\d]/g,'');if(value>10)value=10;if(value<1)value=1"},model:{value:e.form.max_threads,callback:function(t){e.$set(e.form,"max_threads",t)},expression:"form.max_threads"}})],1),a("el-form-item",{attrs:{label:"自动化任务路径",required:!0,prop:"auto_host"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入自动化路径"},model:{value:e.form.auto_host,callback:function(t){e.$set(e.form,"auto_host",t)},expression:"form.auto_host"}})],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addProject("addProForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancleAdd("addProForm")}}},[e._v("取 消")])],1)],1)],1),a("el-dialog",{attrs:{title:"项目信息",visible:e.isEdit,"modal-append-to-body":!1,width:"500px"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{ref:"editProForm",staticClass:"demo-ruleForm",attrs:{model:e.edit_form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"项目id"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.edit_form.id,callback:function(t){e.$set(e.edit_form,"id",t)},expression:"edit_form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称",prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目名称"},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),a("el-form-item",{attrs:{label:"项目路径",required:!0,prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入项目路径 多个路径使用逗号隔开"},model:{value:e.edit_form.host,callback:function(t){e.$set(e.edit_form,"host",t)},expression:"edit_form.host"}})],1),a("el-form-item",{attrs:{label:"最大并发数"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入最大并发数",oninput:"value=value.replace(/[^\\d]/g,'');if(value>10)value=10;if(value<1)value=1"},model:{value:e.edit_form.max_threads,callback:function(t){e.$set(e.edit_form,"max_threads",t)},expression:"edit_form.max_threads"}})],1),a("el-form-item",{attrs:{label:"自动化任务路径",required:!0,prop:"name"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入自动化任务路径"},model:{value:e.edit_form.auto_host,callback:function(t){e.$set(e.edit_form,"auto_host",t)},expression:"edit_form.auto_host"}})],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editProject("editProForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.resetForm("editProForm"),e.isEdit=!1}}},[e._v("取 消")])],1)],1)],1),a("el-dialog",{attrs:{title:"配置协作组员","modal-append-to-body":!1,visible:e.setMember,width:"30%"},on:{"update:visible":function(t){e.setMember=t}}},[e._v(" 选择协作人员 "),a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:e.teamMembers,callback:function(t){e.teamMembers=t},expression:"teamMembers"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.setTeamMember}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.setMember=!1}}},[e._v("取 消")])],1)],1),a("pagenation",{attrs:{total:e.count,pageSize:e.pageSize},on:{change:e.pageChange}})],1)},p=[],f=a("5530"),h=a("bc3a"),g=a.n(h),_=a("2f62"),b=(a("d3b7"),a("ac1f"),a("5319"),a("5c96")),v=a.n(b);g.a.defaults.withCredentials=!0;var x="http://192.168.1.103:8001/api/",y=null,w=g.a.create({headers:{"Content-Type":"application/json"},baseURL:x,timeout:1e5});w.defaults.headers.common["Authorization"]=localStorage.getItem("Authorization"),w.interceptors.request.use((function(e){return localStorage.getItem("Authorization")&&(e.headers.common["Authorization"]=localStorage.getItem("Authorization")),e})),w.interceptors.response.use((function(e){return Promise.resolve(e)}),(function(e){var t=e.response;return 401==t.status?(localStorage.clear(),y&&y.close(),y=Object(b["Message"])({type:"error",message:"请先登录",center:!0}),Be.replace({path:"/login",query:{redirect:Be.currentRoute.fullPath}})):(y&&y.close(),y=Object(b["Message"])({type:"error",message:t.data.msg,center:!0})),Promise.reject(t)}));var k=w,S={addProject:function(e){return k.post("/project/",e)},getProjectList:function(e,t){return k.get("project/",{params:{user_id:localStorage.getItem("UserId"),current_page:e,page_size:t}})},getSearchPageList:function(e,t,a){return k.get("project/",{params:{user_id:localStorage.getItem("UserId"),current_page:e,page_size:t,search_data:a}})},editProject:function(e,t){return k.put("/project/"+e+"/",t)},deleteProject:function(e){return k.delete("project/"+e+"/")},getTeamMembersList:function(e){return k.get("teamMember/",{params:{project_id:e}})},setTeamMember:function(e){return k.post("teamMember/",e)}},j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"current-change":e.changePage}})],1)},P=[],L=(a("a9e3"),{name:"Pagenation",props:{pageSize:{type:Number,default:10},total:{type:Number,default:1}},methods:{changePage:function(){this.$emit("change",this.currentPage)}},computed:{},data:function(){return{currentPage:1,limit:this.pageSize,size:this.total||1}},watch:{}}),$=L,E=Object(n["a"])($,j,P,!1,null,"921a11cc",null),z=E.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"250px",float:"right"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{size:"small",placeholder:"输入名称进行搜索","prefix-icon":"el-icon-search"},model:{value:e.searchData,callback:function(t){e.searchData=t},expression:"searchData"}}),a("el-button",{attrs:{icon:"el-icon-search",circle:"",size:"small"},on:{click:e.search}})],1)},U=[],F={name:"Search",props:["searchData"],methods:{search:function(){this.$emit("search",this.searchData)}}},T=F,O=Object(n["a"])(T,C,U,!1,null,null,null),A=O.exports;g.a.defaults.withCredentials=!0;var I={name:"Project",components:{Pagenation:z,Search:A},data:function(){return{currentPage:1,count:0,pageSize:10,searchData:"",projects:[],isEdit:!1,dialogFormVisible:!1,form:{name:"",host:"",author:localStorage.getItem("UserId"),max_threads:1,auto_host:""},rules:{name:[{required:!0,message:"项目名称不能为空",trigger:"blur"}],host:[{required:!0,message:"项目路径不能为空",trigger:"blur"}],auto_host:[{required:!0,message:"自动化路径不能为空",trigger:"blur"}]},edit_form:{id:"",name:"",host:"",author:localStorage.getItem("UserId"),max_threads:1,auto_host:""},token:localStorage.Authorization,setMember:!1,teamMembers:[],setTeamProjectId:0}},computed:Object(f["a"])({},Object(_["c"])(["users"])),methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])(["getUserList"])),{},{addProject:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var i=t.form;S.addProject(i).then((function(a){1===a.data.code?(t.cancleAdd(e),t.getProjectList()):t.$message(a.data.msg)})).catch((function(e){t.$message("项目信息输入有误")}))}))},getProjectList:function(){var e=this;S.getProjectList(this.currentPage,this.pageSize).then((function(t){var a=t.data.data.res_pro_list;e.projects=a.pro_list,e.count=a.count}))},search:function(e){var t=this;S.getSearchPageList(this.currentPage,this.pageSize,e).then((function(e){var a=e.data.data.res_pro_list;t.projects=a.pro_list,t.count=a.count}))},cancleAdd:function(e){this.resetForm(e),this.dialogFormVisible=!1},intoEditProject:function(e){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),this.isEdit=!0},editProject:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;S.editProject(t.edit_form.id,t.edit_form).then((function(e){1==e.data.code?(t.isEdit=!1,t.getProjectList()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error("项目信息输入有误")}))}))},deleteProject:function(e){var t=this,a=confirm("确定要删除该项目吗");a&&S.deleteProject(e.id).then((function(e){t.$message(e.data.msg),1==e.data.code&&t.getProjectList()}))},getTeamMembersList:function(e){var t=this;S.getTeamMembersList(e).then((function(e){t.teamMembers=e.data.data}))},intoSetTeamMember:function(e){this.getTeamMembersList(e.id),this.setTeamProjectId=e.id,this.getUserList("except_current"),console.log(this.users),this.setMember=!0},setTeamMember:function(){var e=this,t={users:this.teamMembers,project_id:this.setTeamProjectId};S.setTeamMember(t).then((function(t){e.setMember=!1}))},resetForm:function(e){this.$refs[e].resetFields()},pageChange:function(e){this.currentPage=e,this.getProjectList()}}),mounted:function(){this.getProjectList()}},M=I,V=Object(n["a"])(M,m,p,!1,null,null,null),R=V.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","border-radius":"20px"}},[a("div",{staticStyle:{width:"100%",margin:"10px 10px 10px 10px",padding:"10px"}},[e._v(" 当前项目： "),a("el-select",{attrs:{filterable:"",size:"small",placeholder:"请选择"},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,project_index:e.index}})})),1),a("el-button",{staticClass:"my_btn",attrs:{size:"small"},on:{click:e.concurrentExcution}},[e._v("并发执行")]),a("el-button",{staticClass:"my_btn",attrs:{size:"small"},on:{click:e.lookReportSummary}},[e._v("查看报告总结")]),a("el-button",{staticClass:"my_btn",attrs:{size:"small"},on:{click:e.uploadUtils}},[e._v(" 更新调试包 ")]),a("el-button",{staticClass:"my_btn",attrs:{size:"small"},on:{click:e.intoSetAutoTask}},[e._v(" 自动化任务设置 ")]),a("el-button",{staticClass:"my_btn",attrs:{type:"primary",size:"small"},on:{click:e.intoAddPage}},[e._v("新增用例")]),a("search",{attrs:{searchData:e.searchData},on:{search:e.search}}),a("div",{staticStyle:{"margin-top":"15px"}},[e._v(" 执行路径： "),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.excuseHost,callback:function(t){e.excuseHost=t},expression:"excuseHost"}},e._l(e.currentHostList,(function(e){return a("el-option",{key:e.index,attrs:{label:e,value:e}})})),1)],1)],1),a("el-table",{attrs:{data:e.cases,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"100px",fixed:""}}),a("el-table-column",{attrs:{prop:"name",label:"用例名称",width:"300px"}}),a("el-table-column",{attrs:{prop:"script_name",label:"脚本名称",width:"350px"}}),a("el-table-column",{attrs:{prop:"is_threads",label:"是否并发",width:"100px"}}),a("el-table-column",{attrs:{prop:"is_auto_excuse_show",label:"是否自动执行",width:"150px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"480px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{ref:e.id,attrs:{type:"primary",size:"small",icon:"el-icon-caret-right"},on:{click:function(a){return e.excuseCase(t.row)}}},[e._v("执行")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.intoEditCase(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-view"},on:{click:function(a){return e.lookReport(t.row)}}},[e._v("报告")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.deleteCase(t.row)}}})]}}])})],1),a("el-dialog",{attrs:{title:"用例信息","modal-append-to-body":!1,visible:e.dialogFormVisible,width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用例名称",prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入用例名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"重试次数"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入重试次数 最大为5",oninput:"value=value.replace(/[^\\d]/g,'');if(value>5)value=5;if(value<0)value=0"},model:{value:e.form.retry_count,callback:function(t){e.$set(e.form,"retry_count",t)},expression:"form.retry_count"}})],1),a("el-form-item",{attrs:{label:"是否并发",required:!0}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.is_thread,callback:function(t){e.$set(e.form,"is_thread",t)},expression:"form.is_thread"}},[e._v("是")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.is_thread,callback:function(t){e.$set(e.form,"is_thread",t)},expression:"form.is_thread"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"是否自动执行",required:!0}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.is_auto_excuse,callback:function(t){e.$set(e.form,"is_auto_excuse",t)},expression:"form.is_auto_excuse"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form.is_auto_excuse,callback:function(t){e.$set(e.form,"is_auto_excuse",t)},expression:"form.is_auto_excuse"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"用例脚本",required:!0}},[a("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{action:e.upLoadUrl,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,"before-upload":e.beforeUpload,multiple:"","auto-upload":!1,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,headers:e.myHeader}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[e._v("选择脚本文件")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCase}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:e.cancleAddCase}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"用例信息",visible:e.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{attrs:{model:e.edit_form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用例名称",prop:"name"}},[a("el-input",{staticStyle:{width:"250px"},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),a("el-form-item",{attrs:{label:"重试次数"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入重试次数 最大为5",oninput:"value=value.replace(/[^\\d]/g,'');if(value>5)value=5;if(value<0)value=0"},model:{value:e.edit_form.retry_count,callback:function(t){e.$set(e.edit_form,"retry_count",t)},expression:"edit_form.retry_count"}},[e._v(" > ")])],1),a("el-form-item",{attrs:{label:"是否并发",required:!0}},[a("el-radio",{attrs:{label:"1"},model:{value:e.edit_form.is_thread,callback:function(t){e.$set(e.edit_form,"is_thread",t)},expression:"edit_form.is_thread"}},[e._v("是")]),a("el-radio",{attrs:{label:"2"},model:{value:e.edit_form.is_thread,callback:function(t){e.$set(e.edit_form,"is_thread",t)},expression:"edit_form.is_thread"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"是否自动执行",required:!0}},[a("el-radio",{attrs:{label:"1"},model:{value:e.edit_form.is_auto_excuse,callback:function(t){e.$set(e.edit_form,"is_auto_excuse",t)},expression:"edit_form.is_auto_excuse"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.edit_form.is_auto_excuse,callback:function(t){e.$set(e.edit_form,"is_auto_excuse",t)},expression:"edit_form.is_auto_excuse"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"用例脚本"}},[a("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{action:e.upLoadUrl,"on-success":e.handleSuccess,"before-remove":e.beforeRemove,"before-upload":e.beforeUploadEdit,multiple:"","auto-upload":!1,limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,headers:e.myHeader}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[e._v("选择脚本文件")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editCase}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.isEdit=!1,e.fileList.splice(0,1)}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"测试报告","modal-append-to-body":!1,visible:e.isLookReport,width:"80%"},on:{"update:visible":function(t){e.isLookReport=t}}},[a("div",[a("div",{ref:"reportHTML",staticClass:"web-con",domProps:{innerHTML:e._s(e.htmlText)}})])]),a("el-dialog",{attrs:{title:"测试报告总结","modal-append-to-body":!1,visible:e.isLookReportSummary,width:"30%"},on:{"update:visible":function(t){e.isLookReportSummary=t}}},[a("div",{ref:"reportSummary",staticStyle:{"text-align":"center","font-size":"16px"}})]),a("el-dialog",{attrs:{title:"调试包更新","modal-append-to-body":!1,visible:e.clientUpdate,width:"60%"},on:{"update:visible":function(t){e.clientUpdate=t}}},[a("div",[a("div",[a("h5",[e._v("下载调试包:调试包中有对应的用例脚本模板,以及公用的工具包;工具包可进行更新")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"}},[a("span",{staticClass:"link-url",on:{click:e.downloadClient}},[e._v("点击下载调试包")])])],1),a("div",[a("h5",[e._v("更新工具包:可对public中的公用包进行更新,上传的文件须为python文件")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUtilsUrl,multiple:"","auto-upload":!0,"before-upload":e.beforeUtilUpload,"file-list":e.utilsFileList,headers:e.myHeader,"on-success":e.handleUtilsSuccess}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[e._v("点击更新工具包")])],1)],1),a("div",[a("h5",[e._v("更新页面:页面主要作用于pageObject模式脚本,上传的文件须为python文件")]),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadPagesUrl,multiple:"","auto-upload":!0,"before-upload":e.beforeUtilUpload,"file-list":e.pagesFileList,headers:e.myHeader,"on-success":e.handleUtilsSuccess}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"trigger",size:"small",type:"success"},slot:"trigger"},[e._v("点击更新页面")])],1)],1)])]),a("el-dialog",{attrs:{title:"自动化任务设置","modal-append-to-body":!1,visible:e.isSetAuto,width:"50%"},on:{"update:visible":function(t){e.isSetAuto=t}}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{height:"200px"},attrs:{label:"任务配置",name:"first"}},[a("el-form",{attrs:{model:e.autoTask,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"是否开启"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.autoTask.autoSwitch,callback:function(t){e.$set(e.autoTask,"autoSwitch",t)},expression:"autoTask.autoSwitch"}})],1),a("el-form-item",{attrs:{label:" 设置执行时间"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:15",end:"23:59"},placeholder:"选择时间"},model:{value:e.autoTask.autoExcuseTime,callback:function(t){e.$set(e.autoTask,"autoExcuseTime",t)},expression:"autoTask.autoExcuseTime"}})],1)],1),a("div",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.openOrCloseTask}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:e.cancleSetAuto}},[e._v("取 消")])],1)],1),a("el-tab-pane",{staticStyle:{height:"220px",padding:"45px 0"},attrs:{label:"通知配置",name:"second"}},[a("h4",[e._v("配置任务通知")]),a("div",[e._v(" 选择通知方式: "),a("el-select",{attrs:{size:"small",placeholder:"请选择通知方式"},model:{value:e.sendType,callback:function(t){e.sendType=t},expression:"sendType"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v("    "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.sendType,expression:"sendType==1"}]},[e._v("选择通知人员: "),a("el-select",{attrs:{size:"small",filterable:"",multiple:"",placeholder:"请选择"},model:{value:e.sendUserList,callback:function(t){e.sendUserList=t},expression:"sendUserList"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.sendType,expression:"sendType==2"}]},[e._v("请输入webhook地址: "),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.webhook,callback:function(t){e.webhook=t},expression:"webhook"}})],1),e._v("    "),a("el-button",{attrs:{icon:"el-icon-check",circle:"",size:"small"},on:{click:e.addNotice}})],1)])],1)],1),a("pagenation",{attrs:{total:e.count,pageSize:e.pageSize},on:{change:e.pageChange}})],1)},N=[],D=(a("a434"),a("b0c0"),a("159b"),a("1276"),a("498a"),a("25f0"),{baseURL:"http://127.0.0.1:8001/api/"}),H={getCaseList:function(e,t,a){return k.get("case/",{params:{pro_id:e,current_page:t,page_size:a}})},getSearchCaseList:function(e,t,a,i){return k.get("case/",{params:{pro_id:e,current_page:t,page_size:a,search_data:i}})},addCase:function(e){return k.post("case/",e)},editCase:function(e,t){return k.put("case/"+e+"/",t)},excuseCase:function(e,t){return k.get("case/excuse/"+e+"/",{params:{host:t}})},deleteCase:function(e){return k.delete("case/"+e+"/")},getUserProjectList:function(){return k.get("project/",{params:{user_id:localStorage.getItem("UserId")}})},lookReport:function(e){return k.get("case/report/"+e+"/",{headers:{"Content-Type":"text/html; charset=utf-8"}}),k.get("case/report/"+e+"/")},concurrentExcution:function(e){return k.get("case/concurrent/",{params:e})},lookReportSummary:function(e){return k.get("case/reportsummary/"+e+"/")},getProjectDetail:function(e){return k.get("project/"+e+"/")},getProjectNotice:function(e){return k.get("notice/"+e+"/")},openAutoTask:function(e,t){return k.get("case/openMonitor/"+e+"/",{params:t})},closeAutoTask:function(e){return k.delete("case/openMonitor/"+e+"/")},addNotice:function(e){return k.post("notice/",e)}},J=H,B={name:"Project",components:{Pagenation:z,Search:A},data:function(){return{currentPage:1,count:0,pageSize:10,activeName:"first",sendType:"1",searchData:"",typeList:[{value:"1",label:"邮箱"},{value:"2",label:"企业微信"}],cases:[],sendUserList:[],webhook:"",isEdit:!1,dialogFormVisible:!1,isSetAuto:!1,autoTask:{autoSwitch:!1,autoExcuseTime:""},autoTaskStatus:{autoSwitch:!1,autoExcuseTime:""},pro_id:0,form:{name:"",is_thread:"1",retry_count:0,script_name:"",author:localStorage.getItem("UserId"),is_auto_excuse:"1"},rules:{name:[{required:!0,message:"用例名称不能为空",trigger:"blur"}]},edit_form:{name:"",is_thread:"",retry_count:"",script_name:"",author:localStorage.getItem("UserId"),is_auto_excuse:"",is_auto_excuse_show:""},authorProjectList:[],fileList:[],utilsFileList:[],pagesFileList:[],fileName:"",token:localStorage.Authorization,myHeader:{Authorization:localStorage.Authorization},hostList:{},currentHostList:[],excuseHost:"",htmlText:"",isLookReport:!1,isLookReportSummary:!1,reportSummaryContent:"",clientUpdate:!1}},methods:Object(f["a"])(Object(f["a"])({handleChange:function(e){this.fileList.splice(0,1,e.name)},handleSuccess:function(){this.fileList.splice(0,1)},handleUtilsSuccess:function(){this.$message.success("上传成功")},beforeUtilUpload:function(e){var t="text/x-python-script"===e.type||"application/zip"===e.type,a=e.size/1024/1024<.6;return t||this.$message.error("只能上传python文件!"),a||this.$message.error("大小不能超过 600KB!"),t&&a},beforeUpload:function(e){this.form.script_name=e.name},beforeUploadEdit:function(e){this.edit_form.script_name=e.name},handleExceed:function(){this.$message.warning("一次只能上传一个脚本文件")},beforeRemove:function(e,t){return this.form.script_name="",!0},intoAddPage:function(){this.authorProjectList.length>0?this.dialogFormVisible=!0:this.$message.error("请先添加项目")},submitUpload:function(){this.$refs.uploadFile.submit()},addCase:function(){var e=this;if(""!==this.form["name"]){var t=this.form;t["project_id"]=this.pro_id,this.submitUpload(),J.addCase(t).then((function(t){e.dialogFormVisible=!1,e.getCaseList(e.pro_id),e.resetForm()}))}else this.$message.error("用例名称不能为空")},cancleAddCase:function(){this.dialogFormVisible=!1,this.resetForm()},getCaseList:function(e){var t=this;J.getCaseList(e,this.currentPage,this.pageSize).then((function(e){e.data.data.res_list.forEach((function(e){1===e["is_thread"]?e["is_threads"]="是":e["is_threads"]="否",1==e["is_auto_excuse"]?e["is_auto_excuse_show"]="是":e["is_auto_excuse_show"]="否"})),t.cases=e.data.data.res_list,t.count=e.data.data.count}))},search:function(e){var t=this;J.getSearchCaseList(this.pro_id,this.currentPage,this.pageSize,e).then((function(e){e.data.data.res_list.forEach((function(e){1===e["is_thread"]?e["is_threads"]="是":e["is_threads"]="否",1==e["is_auto_excuse"]?e["is_auto_excuse_show"]="是":e["is_auto_excuse_show"]="否"})),t.cases=e.data.data.res_list,t.count=e.data.data.count}))},intoEditCase:function(e){""!==e.script_name&&this.fileList.splice(0,1,{name:e.script_name}),"是"===e.is_threads?e["is_thread"]="1":e["is_thread"]="2","是"===e.is_auto_excuse_show?e["is_auto_excuse"]="1":e["is_auto_excuse"]="0",this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),delete this.edit_form.is_threads,delete this.edit_form.is_auto_excuse_show,this.isEdit=!0},editCase:function(){var e=this;""!=this.edit_form.name&&(this.submitUpload(),J.editCase(this.edit_form.id,this.edit_form).then((function(t){1==t.data.code?(e.isEdit=!1,e.getCaseList(e.pro_id),e.fileList.splice(0,1)):alert(t.data.msg)})))},excuseCase:function(e){var t=this;J.excuseCase(e.id,this.excuseHost).then((function(e){t.$message(e.data.msg)}))},deleteCase:function(e){var t=this,a=confirm("确定要删除该项目吗");a&&J.deleteCase(e.id).then((function(e){t.$message(e.data.msg),1==e.data.code&&t.getCaseList(t.pro_id)}))},lookReport:function(e){var t=this;J.lookReport(e.id).then((function(e){if(3==e.data.code)t.$message(e.data.msg);else{t.htmlText=e.data;var a="";e.data.replace(/<script.*?>([\s\S]+?)<\/script>/gim,(function(e,t){a=t})),t.$nextTick((function(){var e=document.createElement("script");e.innerHTML=a,t.$refs.reportHTML.append(e)})),t.isLookReport=!0}}))},uploadUtils:function(){this.utilsFileList.splice(0,3),this.clientUpdate=!0},resetForm:function(){this.form.name="",this.form.is_thread="1",this.form.is_auto_excuse="1",this.form.retry_count="",this.form.script_name="",this.fileList.splice(0)},concurrentExcution:function(){var e={project_id:this.pro_id,host:this.excuseHost};J.concurrentExcution(e).then((function(e){confirm(e.data.msg)}))},lookReportSummary:function(){var e=this;J.lookReportSummary(this.pro_id).then((function(t){1===t.data.code?(e.isLookReportSummary=!0,e.$nextTick((function(){e.$refs.reportSummary.innerHTML=t.data.data}))):e.$message(t.data.msg)}))},downloadClient:function(){window.open(D.baseURL+"case/downloadclient/"+this.pro_id+"/")},intoSetAutoTask:function(){var e=this;J.getProjectDetail(this.pro_id).then((function(t){if(1==t.status){var a=t.data.data;e.autoTask.autoSwitch=1==a["is_auto"],e.autoTask.autoExcuseTime=a["excuse_time"]}})),J.getProjectNotice(this.pro_id).then((function(t){if(""!=t.data.data){var a=t.data.data;e.sendType=a["notice_type"]+"",e.sendUserList.splice(0),"1"===e.sendType&&a["user_list"].split(",").forEach((function(t){e.sendUserList.push(Number(t))})),e.webhook=a["webhook"]}else e.sendUserList.splice(0),e.webhook=""})),this.getUserList("all"),this.autoTaskStatus=Object(f["a"])(Object(f["a"])({},this.autoTaskStatus),this.autoTask),this.isSetAuto=!0},cancleSetAuto:function(){this.autoTask=Object(f["a"])(Object(f["a"])({},this.autoTask),this.autoTaskStatus),this.isSetAuto=!1},openOrCloseTask:function(){var e=this;if(this.autoTask.autoSwitch){var t={excuse_time:this.autoTask.autoExcuseTime};J.openAutoTask(this.pro_id,t).then((function(t){e.isSetAuto=!1,e.$message(t.data.msg)}))}else J.closeAutoTask(this.pro_id).then((function(t){e.isSetAuto=!1,e.$message(t.data.msg)}))}},Object(_["b"])(["getUserList"])),{},{addNotice:function(){var e=this,t={project_id:this.pro_id};if("1"==this.sendType){var a=this.sendUserList.length;if(0===a)return void this.$message.error("必须配置收件人");t["notice_type"]=1;for(var i=this.sendUserList[0],o=1;o<a;o++)i+=","+this.sendUserList[o];t["user_list"]=i}else{var r=this.webhook.trim();if(console.log(r),!r)return void this.$message.error("请输入webhook地址");t["notice_type"]=2,t["webhook"]=r}J.addNotice(t).then((function(t){e.$message(t.data.msg),e.isSetAuto=!1}))},pageChange:function(e){this.currentPage=e,this.getCaseList(this.pro_id)}}),computed:Object(f["a"])({upLoadUrl:function(){return D.baseURL+"case/uploadScript/"+this.pro_id+"/"},uploadUtilsUrl:function(){return D.baseURL+"case/uploadUtils/"+this.pro_id+"/"},uploadPagesUrl:function(){return D.baseURL+"case/uploadPages/"+this.pro_id+"/"}},Object(_["c"])(["users"])),watch:{pro_id:function(e,t){this.getCaseList(e),this.currentHostList=this.hostList[e.toString()],this.excuseHost=this.currentHostList[0]}},mounted:function(){var e=this;J.getUserProjectList().then((function(t){t.data.data.res_pro_list.forEach((function(t){e.authorProjectList.push(t)})),e.hostList=t.data.data.res_host_list,t.data.data.res_pro_list.length>0?(e.pro_id=t.data.data.res_pro_list[0].id,e.getCaseList(e.pro_id)):e.pro_id=""}))}},K=B,W=(a("71b3"),Object(n["a"])(K,q,N,!1,null,"9afa0fa6",null)),G=W.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("创建任务")]),a("el-table",{attrs:{data:e.tasks,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"50"}}),a("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"180"}}),a("el-table-column",{attrs:{prop:"author",label:"负责人"}}),a("el-table-column",{attrs:{prop:"project_id",label:"所属项目"}}),a("el-table-column",{attrs:{prop:"task_level",label:"任务等级",width:"100px"}}),a("el-table-column",{attrs:{prop:"case_count",label:"用例数",width:"100px"}}),a("el-table-column",{attrs:{prop:"excuse_result",label:"执行结果"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.intoEditProject(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteProject(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"任务信息","modal-append-to-body":!1,visible:e.isAdd,width:"40%"},on:{"update:visible":function(t){e.isAdd=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"任务名称"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"所属项目"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),a("el-form-item",{attrs:{label:"添加用例"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.max_threads,callback:function(t){e.$set(e.form,"max_threads",t)},expression:"form.max_threads"}})],1),a("el-form-item",{attrs:{label:"任务等级"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.auto_host,callback:function(t){e.$set(e.form,"auto_host",t)},expression:"form.auto_host"}})],1),a("el-form-item",{attrs:{label:"执行时间"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.auto_host,callback:function(t){e.$set(e.form,"auto_host",t)},expression:"form.auto_host"}})],1),a("el-form-item",{attrs:{label:"间隔时间"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择间隔时间"},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,project_index:e.index}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addProject}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:e.cancleAdd}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"项目信息",visible:e.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{attrs:{model:e.edit_form,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"项目id"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.id,callback:function(t){e.$set(e.edit_form,"id",t)},expression:"edit_form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"项目名称"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),a("el-form-item",{attrs:{label:"项目路径"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.host,callback:function(t){e.$set(e.edit_form,"host",t)},expression:"edit_form.host"}})],1),a("el-form-item",{attrs:{label:"最大并发数"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.max_threads,callback:function(t){e.$set(e.edit_form,"max_threads",t)},expression:"edit_form.max_threads"}})],1),a("el-form-item",{attrs:{label:"自动化任务路径"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.auto_host,callback:function(t){e.$set(e.edit_form,"auto_host",t)},expression:"edit_form.auto_host"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editProject}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.isEdit=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"配置协作组员","modal-append-to-body":!1,visible:e.setMember,width:"30%"},on:{"update:visible":function(t){e.setMember=t}}},[e._v(" 选择协作人员 "),a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择"},model:{value:e.teamMembers,callback:function(t){e.teamMembers=t},expression:"teamMembers"}},e._l(e.users,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.setTeamMember}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.setMember=!1}}},[e._v("取 消")])],1)],1)],1)},X=[];g.a.defaults.withCredentials=!0;var Y={name:"Task",data:function(){return{tasks:[],IntervalTimeList:[],isEdit:!1,isAdd:!1,form:{name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},edit_form:{id:"",name:"",host:"",author:localStorage.getItem("UserId"),max_threads:"",auto_host:""},token:localStorage.Authorization}},methods:{addProject:function(){var e=this,t=this.form;g.a.post("http://127.0.0.1:8001/api/project/",t,{headers:{Authorization:this.token}}).then((function(t){1===t.data.code?(e.dialogFormVisible=!1,e.getProjectList()):e.$message(t.data.msg),e.resetForm()})).catch((function(t){e.$message("项目信息输入有误")}))},getProjectList:function(){var e=this;g.a.get("http://127.0.0.1:8001/api/project/",{headers:{Authorization:this.token},responseType:"json",params:{user_id:localStorage.getItem("UserId")}}).then((function(t){e.projects=t.data.data.res_pro_list}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditProject:function(e){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),this.isEdit=!0},editProject:function(){var e=this;g.a.put("http://127.0.0.1:8001/api/project/"+this.edit_form.id+"/",this.edit_form,{headers:{Authorization:this.token},responseType:"json"}).then((function(t){1==t.data.code?(e.isEdit=!1,e.getProjectList()):e.$message(t.data.msg)})).catch((function(t){e.$message("项目信息输入有误")}))},deleteProject:function(e){var t=this,a=confirm("确定要删除该项目吗");a&&g.a.delete("http://127.0.0.1:8001/api/project/"+e.id+"/",{headers:{Authorization:this.token},responseType:"json"}).then((function(e){t.$message(e.data.msg),1==e.data.code&&t.getProjectList()}))},resetForm:function(){this.form.name="",this.form.host="",this.form.max_threads="",this.form.auto_host=""}},mounted:function(){this.getProjectList()}},Z=Y,ee=Object(n["a"])(Z,Q,X,!1,null,null,null),te=ee.exports,ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"container",style:e.bgI},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-offset-3 col-md-6"},[a("form",{staticClass:"form-horizontal",staticStyle:{position:"relative",width:"440px",height:"340px",left:"-6%","margin-top":"95px"}},[a("span",{staticClass:"heading"},[e._v("用户登录")]),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),a("i",{staticClass:"fa fa-user"})]),a("div",{staticClass:"form-group help"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"密　码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-default",on:{click:e.login}},[e._v("登录")])])])])])])])},ie=[],oe={name:"Login",data:function(){return{username:"",password:""}},methods:{login:function(){var e=this;if(""===this.username||""===this.password)this.$message("账号或密码不能为空");else{var t={username:this.username,password:this.password};k.post("login/",t).then((function(t){localStorage.clear(),localStorage.setItem("Authorization","JWT "+t.data.token),localStorage.setItem("User",t.data.username),localStorage.setItem("UserId",t.data.id),e.$router.push({path:"/"})})).catch((function(t){if(400==t.response.status)return e.$message.error("用户或密码错误"),Promise.reject(t)}))}}},computed:{bgI:function(){return{backgroundImage:"url("+a("789c")+")",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center",height:"70%",width:"80%",marginTop:"118px"}}}},re=oe,se=(a("76fa"),Object(n["a"])(re,ae,ie,!1,null,"f6bc0df6",null)),le=se.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-header",{staticStyle:{"text-align":"right","font-size":"12px","padding-left":"0","margin-right":"40px"}},[[a("Navigation")]],2),a("el-main",{staticStyle:{width:"80%","margin-left":"10%","margin-right":"10%"}},[a("router-view"),a("el-dialog",{attrs:{title:"修改密码","modal-append-to-body":!1,visible:e.$store.state.isChangePassword,width:"450px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){return e.$set(e.$store.state,"isChangePassword",t)}}},[a("el-form",{ref:"passwodForm",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"原密码",prop:"old_password"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{size:"small",placeholder:"请输入原密码","show-password":""},model:{value:e.form.old_password,callback:function(t){e.$set(e.form,"old_password",t)},expression:"form.old_password"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"new_password"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{size:"small",placeholder:"请输入新密码","show-password":""},model:{value:e.form.new_password,callback:function(t){e.$set(e.form,"new_password",t)},expression:"form.new_password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"comfirm_password"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{size:"small",placeholder:"请再次输入密码","show-password":""},model:{value:e.form.comfirm_password,callback:function(t){e.$set(e.form,"comfirm_password",t)},expression:"form.comfirm_password"}})],1),a("el-form-item",{staticStyle:{"margin-left":"50px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changePwd("passwodForm")}}},[e._v("确认")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancleChange("passwodForm")}}},[e._v("取消")])],1)],1)],1)],1)],1)},ce=[],de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{attrs:{gutter:0}},[i("el-col",{attrs:{span:2}},[i("img",{staticStyle:{display:"inline-block",height:"60px",width:"90px","margin-right":"30px"},attrs:{src:a("4dd9"),alt:"首页"},on:{click:e.toIndex}})]),i("el-col",{attrs:{span:16}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex2,mode:"horizontal","background-color":"#0074D9","text-color":"#fff","active-text-color":"#00A2E9",router:""}},[i("el-menu-item",{attrs:{index:"case"}},[e._v("用例管理")]),i("el-menu-item",{attrs:{index:"user"}},[e._v("人员管理")]),i("el-submenu",{attrs:{index:"4"}},[i("template",{slot:"title"},[e._v("元素库管理")]),i("el-menu-item",{attrs:{index:"element"}},[e._v("元素库列表")]),i("el-menu-item",{attrs:{index:"page"}},[e._v("页面管理")])],2),i("el-menu-item",{attrs:{index:"project"}},[e._v("项目管理")])],1)],1)]),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"grid-content bg-purple",staticStyle:{"background-color":"#0074d9"}},[i("span",{staticStyle:{color:"#fbfdff"}},[e._v("当前用户：")]),e._v("  "),i("el-dropdown",{staticStyle:{"margin-top":"15px","margin-right":"20px"},on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-user-solid"}),e._v(" "+e._s(e.username)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"1"}},[e._v("修改密码")]),i("el-dropdown-item",{attrs:{command:"2"}},[e._v("退出")])],1)],1)],1)])],1)],1)},ue=[],me={name:"Navigation",data:function(){return{activeIndex:"1",activeIndex2:"1",circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},methods:Object(f["a"])({handleCommand:function(e){"2"===e?(localStorage.clear(),this.$router.push("/login")):"1"===e&&this.changePassword()},toIndex:function(){this.$router.push({path:"/"})}},Object(_["b"])(["changePassword"])),computed:{username:function(){return localStorage.getItem("User")}}},pe=me,fe=(a("d64f"),Object(n["a"])(pe,de,ue,!1,null,"3bd86162",null)),he=fe.exports,ge={addUser:function(e){return k.post("user/",e)},editUser:function(e,t){return k.put("user/"+e+"/",t)},deleteUser:function(e){return k.delete("user/"+e+"/")},updatePwd:function(e){return k.put("user/"+localStorage.getItem("UserId")+"/",e)}},_e=ge,be={name:"Index",components:{Navigation:he},data:function(){return{form:{old_password:"",new_password:"",comfirm_password:""},rules:{old_password:[{required:!0,message:"原始密码不能为空",trigger:"blur"}],new_password:[{required:!0,message:"新密码不能为空",trigger:"blur"}],comfirm_password:[{required:!0,message:"确认密码不能为空",trigger:"blur"}]}}},methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])(["changePassword"])),{},{changePwd:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(t.form.new_password===t.form.comfirm_password){var a={old_password:t.form.old_password,new_password:t.form.new_password};_e.updatePwd(a).then((function(e){t.$message.success(e.data.msg),t.cancleChange("passwodForm")})).catch((function(e){t.$message.error(e.data.msg)}))}else t.$message.error("两次密码不一致")}))},resetForm:function(e){this.$refs[e].resetFields()},cancleChange:function(e){this.changePassword(),this.resetForm(e)}}),computed:{}},ve=be,xe=(a("5421"),Object(n["a"])(ve,ne,ce,!1,null,"08b44e2e",null)),ye=xe.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","border-radius":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}],staticStyle:{margin:"10px 0 10px 10px"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增用户")]),a("el-table",{attrs:{data:e.users,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"100px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"user_type",label:"角色"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.intoEditUser(t.row)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}],attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"用户信息","modal-append-to-body":!1,visible:e.dialogFormVisible,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用户名称"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"邮箱账号"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"用户角色"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.form.is_superuser,callback:function(t){e.$set(e.form,"is_superuser",t)},expression:"form.is_superuser"}},e._l(e.userTypeList,(function(e){return a("el-option",{key:e.num,attrs:{label:e.type,value:e.num}})})),1)],1),a("el-form-item",{attrs:{label:"设置密码"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:e.cancleAdd}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"项目信息",visible:e.isEdit,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{attrs:{model:e.edit_form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px",display:"none"},attrs:{label:"用户id"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.id,callback:function(t){e.$set(e.edit_form,"id",t)},expression:"edit_form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"用户名称"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:e.edit_form.username,callback:function(t){e.$set(e.edit_form,"username",t)},expression:"edit_form.username"}})],1),a("el-form-item",{attrs:{label:"邮箱账号",prop:"email"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.email,callback:function(t){e.$set(e.edit_form,"email",t)},expression:"edit_form.email"}})],1),a("el-form-item",{attrs:{label:"用户角色"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{disabled:""},model:{value:e.edit_form.user_type,callback:function(t){e.$set(e.edit_form,"user_type",t)},expression:"edit_form.user_type"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editUser}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.isEdit=!1}}},[e._v("取 消")])],1)],1)],1)},ke=[];g.a.defaults.withCredentials=!0;var Se={name:"Project",data:function(){return{isEdit:!1,userTypeList:[{num:1,type:"普通用户"},{num:2,type:"管理员"}],dialogFormVisible:!1,token:localStorage.Authorization,currentUser:localStorage.UserId,form:{username:"",email:"",password:"",is_superuser:""},edit_form:{id:"",username:"",email:"",is_superuser:""},rules:{email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}]}}},methods:Object(f["a"])(Object(f["a"])({},Object(_["b"])(["getUserList"])),{},{addUser:function(){var e=this,t=Object(f["a"])(Object(f["a"])({},this.addProjectData),this.form);t["is_superuser"]=0===this.form["is_superuser"],_e.addUser(t).then((function(t){1===t.data.code?(e.dialogFormVisible=!1,e.getUserList("userShow")):e.$message(t.data.msg),e.resetForm()})).catch((function(t){e.$message("项目信息输入有误")}))},cancleAdd:function(){this.resetForm(),this.dialogFormVisible=!1},intoEditUser:function(e){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),this.edit_form["user_type"]=this.edit_form["is_superuser"]?"超级管理员":"普通用户",this.isEdit=!0},editUser:function(){var e=this;this.edit_form["email"].trim()&&_e.editUser(this.edit_form.id,this.edit_form).then((function(t){1==t.data.code?(e.isEdit=!1,e.getUserList("userShow")):e.$message(t.data.msg)})).catch((function(t){e.$message("项目信息输入有误")}))},deleteUser:function(e){var t=this,a=confirm("确定要删除该用户吗");a&&_e.deleteUser(e.id).then((function(e){t.$message(e.data.msg),1==e.data.code&&t.getUserList("userShow")}))},resetForm:function(){this.form.username="",this.form.email="",this.form.password="",this.form.is_superuser=""}}),computed:Object(f["a"])({isAdmin:function(){return 1==this.currentUser}},Object(_["c"])(["users"])),mounted:function(){this.getUserList("userShow")}},je=Se,Pe=Object(n["a"])(je,we,ke,!1,null,null,null),Le=Pe.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","border-radius":"20px"}},[a("div",{staticStyle:{margin:"10px 10px 10px 10px",padding:"10px"}},[a("span",[e._v(" 当前项目： "),a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("span",[e._v(" 选择页面： "),a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.page_id,callback:function(t){e.page_id=t},expression:"page_id"}},e._l(e.projectPageList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.intoAddPage}},[e._v("新 增 元 素")]),a("search",{staticStyle:{display:"inline-block"},attrs:{searchData:e.searchData},on:{search:e.search}})],1),a("el-table",{attrs:{data:e.eleList,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"100px"}}),a("el-table-column",{attrs:{prop:"name",label:"元素名称名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"loc_method",label:"定位方式",width:"200px"}}),a("el-table-column",{attrs:{prop:"element_location",label:"元素定位"}}),a("el-table-column",{attrs:{prop:"index",label:"元素索引",width:"100px"}}),a("el-table-column",{attrs:{prop:"tag",label:"tag内容"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.intoEditProject(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteElement(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"页面信息","modal-append-to-body":!1,visible:e.dialogFormVisible,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addElementForm",attrs:{model:e.form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"元素id"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素名称",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"定位方式",prop:"loc_method"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.form.loc_method,callback:function(t){e.$set(e.form,"loc_method",t)},expression:"form.loc_method"}},e._l(e.locMethods,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素定位",prop:"element_location"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素定位"},model:{value:e.form.element_location,callback:function(t){e.$set(e.form,"element_location",t)},expression:"form.element_location"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素索引"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素索引"},model:{value:e.form.index,callback:function(t){e.$set(e.form,"index",t)},expression:"form.index"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"tag值",prop:"tag"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入tag值"},model:{value:e.form.tag,callback:function(t){e.$set(e.form,"tag",t)},expression:"form.tag"}})],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addElement("addElementForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFormVisible=!1,e.resetForm("addElementForm")}}},[e._v("取 消")])],1)],1)],1),a("el-dialog",{attrs:{title:"页面信息",visible:e.isEdit,"modal-append-to-body":!1,width:"40%"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{ref:"editElementForm",attrs:{model:e.edit_form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"元素id"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.id,callback:function(t){e.$set(e.edit_form,"id",t)},expression:"edit_form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素名称",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素名称"},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"定位方式"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.edit_form.loc_method,callback:function(t){e.$set(e.edit_form,"loc_method",t)},expression:"edit_form.loc_method"}},e._l(e.locMethods,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素定位",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素定位"},model:{value:e.edit_form.element_location,callback:function(t){e.$set(e.edit_form,"element_location",t)},expression:"edit_form.element_location"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"元素索引"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入元素索引"},model:{value:e.edit_form.index,callback:function(t){e.$set(e.edit_form,"index",t)},expression:"edit_form.index"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"tag值",prop:"tag"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入tag值"},model:{value:e.edit_form.tag,callback:function(t){e.$set(e.edit_form,"tag",t)},expression:"edit_form.tag"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"所属页面",prop:"name"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.edit_form.page_id,callback:function(t){e.$set(e.edit_form,"page_id",t)},expression:"edit_form.page_id"}},e._l(e.projectPageList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editElement("editElementForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.isEdit=!1,e.resetForm("editElementForm")}}},[e._v("取 消")])],1)],1)],1),a("pagenation",{attrs:{total:e.count,pageSize:e.pageSize},on:{change:e.pageChange}})],1)},Ee=[],ze=(a("4de4"),{getPageList:function(e,t,a){var i=null;return i=t?{project_id:e,current_page:t,page_size:a}:{project_id:e},k.get("page/",{params:i})},getSearchPageList:function(e,t,a,i){var o=null;return o=t?{project_id:e,current_page:t,page_size:a,search_data:i}:{project_id:e},k.get("page/",{params:o})},addPage:function(e){return k.post("page/",e)},editPage:function(e,t){return k.put("page/"+e+"/",t)},deletePage:function(e){return k.delete("page/"+e+"/")}}),Ce=ze,Ue={getElementList:function(e,t,a){return k.get("element/",{params:{page_id:e,current_page:t,page_size:a}})},getSearchElementList:function(e,t,a,i){return k.get("element/",{params:{page_id:e,current_page:t,page_size:a,search_data:i}})},addElement:function(e){return k.post("element/",e)},editElement:function(e,t){return k.put("element/"+e+"/",t)},deleteElement:function(e){return k.delete("element/"+e+"/")}},Fe=Ue;g.a.defaults.withCredentials=!0;var Te={name:"Element",components:{Pagenation:z,Search:A},data:function(){return{currentPage:1,count:0,pageSize:10,authorProjectList:[],projectPageList:[],locMethods:[{value:"id",label:"id"},{value:"name",label:"name"},{value:"xpath",label:"xpath"},{value:"css",label:"css"},{value:"tag",label:"tag"}],eleList:[],pro_id:"",page_id:"",searchData:"",isEdit:!1,userTypeList:[{num:1,type:"普通用户"},{num:2,type:"管理员"}],dialogFormVisible:!1,token:localStorage.Authorization,form:{name:"",element_location:"",loc_method:"",tag:"",index:0},edit_form:{id:"",name:"",element_location:"",loc_method:"",tag:"",index:0},rules:{name:[{required:!0,message:"元素名称不能为空",trigger:"blur"}],element_location:[{required:!0,message:"元素定位不能为空",trigger:"blur"}],loc_method:[{required:!0,message:"定位方式不能为空",trigger:"blur"}],tag:[{required:!0,message:"tag值不能为空",trigger:"blur"}]}}},methods:{getElementList:function(e){var t=this;Fe.getElementList(e,this.currentPage,this.pageSize).then((function(e){t.eleList=e.data.data.res_list,t.count=e.data.data.count}))},getPageList:function(e){var t=this;Ce.getPageList(e).then((function(e){t.projectPageList=e.data.data.res_list.filter((function(e){return e.project_id==t.pro_id})),t.projectPageList.length>0?t.page_id=t.projectPageList[0].id:t.page_id=""}))},intoAddPage:function(){this.projectPageList.length>0?this.dialogFormVisible=!0:this.$message.error("请先添加页面")},addElement:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;var i=Object(f["a"])({},t.form);i["page_id"]=t.page_id,Fe.addElement(i).then((function(a){1===a.data.code?(t.dialogFormVisible=!1,t.getElementList(t.page_id),t.cancleAdd(e)):t.$message(a.data.msg)}))}))},cancleAdd:function(e){this.resetForm(e),this.dialogFormVisible=!1},intoEditProject:function(e){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),this.isEdit=!0},editElement:function(e){var t=this,a=Object(f["a"])({},this.edit_form);a["page_id"]=this.page_id,Fe.editElement(a.id,a).then((function(a){1==a.data.code?(t.isEdit=!1,t.resetForm(e),t.getElementList(t.page_id)):t.$message(a.data.msg)})).catch((function(e){t.$message(e.data.msg)}))},deleteElement:function(e){var t=this,a=confirm("确定要删除该元素吗");a&&Fe.deleteElement(e.id).then((function(e){t.$message(e.data.msg),1==e.data.code&&t.getElementList(t.page_id)}))},resetForm:function(e){this.$refs[e].resetFields()},pageChange:function(e){this.currentPage=e,this.getElementList(this.page_id)},search:function(e){var t=this;Fe.getSearchElementList(this.page_id,this.currentPage,this.pageSize,e).then((function(e){t.eleList=e.data.data.res_list,t.count=e.data.data.count}))}},watch:{pro_id:function(e,t){this.getPageList(e)},page_id:function(e,t){""!=e?this.getElementList(e):this.eleList.splice(0)}},mounted:function(){var e=this;J.getUserProjectList().then((function(t){t.data.data.res_pro_list.forEach((function(t){e.authorProjectList.push(t)})),t.data.data.res_pro_list.length>0?(e.pro_id=t.data.data.res_pro_list[0].id,e.getPageList(e.pro_id)):e.pro_id=""}))}},Oe=Te,Ae=Object(n["a"])(Oe,$e,Ee,!1,null,null,null),Ie=Ae.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)","border-radius":"20px"}},[a("div",{staticStyle:{margin:"10px 10px 10px 10px",padding:"10px"}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:e.intoAddPage}},[e._v("新 增 页 面")]),a("span",{staticStyle:{float:"left"}},[e._v(" 当前项目： "),a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,project_index:e.index}})})),1)],1),a("span",[a("search",{attrs:{searchData:e.searchData},on:{search:e.search}})],1)],1),a("el-table",{attrs:{data:e.pages,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"id",width:"100px"}}),a("el-table-column",{attrs:{prop:"name",label:"页面名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"author",label:"负责人"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.intoEditPage(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.deletePage(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"页面信息","modal-append-to-body":!1,visible:e.dialogFormVisible,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"addPageForm",attrs:{model:e.form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"页面名称",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入页面名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"选择项目",prop:"project_id"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.form.project_id,callback:function(t){e.$set(e.form,"project_id",t)},expression:"form.project_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,project_index:e.index}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPage("addPageForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.cancleAdd("addPageForm")}}},[e._v("取 消")])],1)],1)],1),a("el-dialog",{attrs:{title:"页面信息",visible:e.isEdit,"modal-append-to-body":!1,width:"40%"},on:{"update:visible":function(t){e.isEdit=t}}},[a("el-form",{ref:"editPageForm",attrs:{model:e.edit_form,"label-position":"right","label-width":"120px",rules:e.rules}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"用户id"}},[a("el-input",{staticStyle:{width:"350px"},model:{value:e.edit_form.id,callback:function(t){e.$set(e.edit_form,"id",t)},expression:"edit_form.id"}})],1),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"页面名称",prop:"name"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入页面名称"},model:{value:e.edit_form.name,callback:function(t){e.$set(e.edit_form,"name",t)},expression:"edit_form.name"}})],1),a("el-form-item",{attrs:{label:"选择项目"}},[a("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择"},model:{value:e.edit_form.project_id,callback:function(t){e.$set(e.edit_form,"project_id",t)},expression:"edit_form.project_id"}},e._l(e.authorProjectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,project_index:e.index}})})),1)],1),a("el-form-item",{staticStyle:{"margin-left":"40px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editPage("editPageForm")}}},[e._v("确 定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.isEdit=!1,e.resetForm("editPageForm")}}},[e._v("取 消")])],1)],1)],1),a("pagenation",{attrs:{total:e.count,pageSize:e.pageSize},on:{change:e.pageChange}})],1)},Ve=[],Re={name:"Page",components:{Pagenation:z,Search:A},data:function(){return{currentPage:1,count:0,searchData:"",pageSize:10,pages:[],isEdit:!1,dialogFormVisible:!1,authorProjectList:[],pro_id:"",token:localStorage.Authorization,currentUser:localStorage.UserId,form:{name:"",project_id:"",author:localStorage.User},edit_form:{name:"",project_id:""},rules:{name:[{required:!0,message:"页面名称不能为空",trigger:"blur"}],project_id:[{required:!0,message:"所属项目不能为空",trigger:"blur"}]}}},methods:{intoAddPage:function(){this.authorProjectList.length>0?this.dialogFormVisible=!0:this.$message.error("请先添加项目")},addPage:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return!1;Ce.addPage(t.form).then((function(a){1===a.data.code?(t.cancleAdd(e),t.getPageList(t.pro_id)):t.$message(a.data.msg)}))}))},getPageList:function(e){var t=this;Ce.getPageList(e,this.currentPage,this.pageSize).then((function(e){var a=e.data.data;t.pages=a.res_list.filter((function(e){return e.project_id==t.pro_id})),t.count=a.count}))},cancleAdd:function(e){this.resetForm(e),this.dialogFormVisible=!1},intoEditPage:function(e){this.edit_form=Object(f["a"])(Object(f["a"])({},this.edit_form),e),this.isEdit=!0},editPage:function(){var e=this;Ce.editPage(this.edit_form.id,this.edit_form).then((function(t){1==t.data.code?(e.isEdit=!1,e.getPageList(e.pro_id)):e.$message(t.data.msg)}))},deletePage:function(e){var t=this,a=confirm("删除该页面，会将该页面的元素一并删除；是否确定删除？");a&&Ce.deletePage(e.id).then((function(e){1==e.data.code&&(t.$message.success(e.data.msg),t.getPageList(t.pro_id))}))},resetForm:function(e){this.$refs[e].resetFields()},pageChange:function(e){this.currentPage=e,this.getPageList(this.pro_id)},search:function(e){var t=this;Ce.getSearchPageList(this.pro_id,this.currentPage,this.pageSize,e).then((function(e){var a=e.data.data;t.pages=a.res_list.filter((function(e){return e.project_id==t.pro_id})),t.count=a.count}))}},computed:{},watch:{pro_id:function(e,t){this.getPageList(e)}},mounted:function(){var e=this;J.getUserProjectList().then((function(t){t.data.data.res_pro_list.forEach((function(t){e.authorProjectList.push(t)})),t.data.data.res_pro_list.length>0?e.pro_id=t.data.data.res_pro_list[0].id:e.pro_id=""}))}},qe=Re,Ne=Object(n["a"])(qe,Me,Ve,!1,null,null,null),De=Ne.exports;i["default"].use(u["a"]);var He=u["a"].prototype.push;u["a"].prototype.push=function(e){return He.call(this,e).catch((function(e){return e}))};var Je=new u["a"]({routes:[{name:"home",path:"/",component:ye,children:[{name:"project",path:"project",component:R},{name:"case",path:"case",component:G},{name:"user",path:"user",component:Le},{name:"element",path:"element",component:Ie},{name:"page",path:"page",component:De},{name:"task",path:"task",component:te}]},{name:"login",path:"/login",component:le}]}),Be=Je;a("0fae");i["default"].use(_["a"]);var Ke={},We={getUserList:function(e,t){k.get("user/",{headers:{Authorization:localStorage.getItem("Authorization")},responseType:"json"}).then((function(a){"except_current"===t?e.users=a.data.data.filter((function(e){return e.id!=localStorage.UserId})):"all"===t?e.users=a.data.data:"userShow"===t&&(a.data.data.forEach((function(e){e["is_superuser"]?e["user_type"]="超级管理员":e["user_type"]="普通用户"})),e.users=a.data.data)}))},changePassword:function(e){e.isChangePassword=!e.isChangePassword}},Ge={users:[],isChangePassword:!1},Qe=new _["a"].Store({actions:Ke,mutations:We,state:Ge}),Xe={tcase:J,project:S,user:_e},Ye=Xe;i["default"].config.productionTip=!1,i["default"].use(v.a),i["default"].use(u["a"]),i["default"].prototype.$api=Ye,new i["default"]({render:function(e){return e(d)},router:Be,store:Qe,beforeCreate:function(){i["default"].prototype.$bus=this}}).$mount("#app")},"71b3":function(e,t,a){"use strict";a("c36a")},"76fa":function(e,t,a){"use strict";a("4196")},"789c":function(e,t,a){e.exports=a.p+"static/img/login.a9a78798.png"},"85ec":function(e,t,a){},"8f55":function(e,t,a){},c36a:function(e,t,a){},d64f:function(e,t,a){"use strict";a("0032")}});
//# sourceMappingURL=index.ae9976c8.js.map